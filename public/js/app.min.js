$(function(){var h=window.location.protocol+"//"+window.location.host;console.log("connecting to "+h);var socket=io.connect(h);socket.on("connect",function(){console.log("connected to server")}),socket.on("leases",function(data){console.log("new socket data:"+data),data.sort(function(a,b){var aa=a.ip_address.split("."),bb=b.ip_address.split(".");return 16777216*aa[0]+65536*aa[1]+256*aa[2]+1*aa[3]-(16777216*bb[0]+65536*bb[1]+256*bb[2]+1*bb[3])}),console.log("data sorted: "+data.length),$("#tableMachines tr").not(":first").remove();for(var html="",i=0;i<data.length;i++){html+="<tr><td>"+data[i].name+"</td>",html+="<td>"+data[i].ip_address+"</td>",html+="<td>"+data[i].mac_address+"</td>";var t=new Date(1e3*data[i].expireTime);html+="<td>"+t.toLocaleString()+"</td></tr>"}console.log("add html: "+html),$("#tableMachines tr").first().after(html)})});